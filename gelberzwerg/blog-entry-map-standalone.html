<html>
	<head></head>
	<body>
		
		<!-- Snip -->
		
		<link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.3/dist/leaflet.css" />
		<script src="https://unpkg.com/leaflet@1.0.3/dist/leaflet.js"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
		
		<div id="map" style="width:100%;height:100%;margin:0px"></div>
		
		<script>
			$.getJSON("https://crispin-kirchner.github.io/gelberzwerg/blog-entries.json", function(markers) {
				
				var maxLon = 0,
					maxLat = 0,
					minLon = Number.POSITIVE_INFINITY,
					minLat = Number.POSITIVE_INFINITY;
					
				for (var i = 0; i < markers.length; i++) {
					var markerCoordinate = markers[i].coordinate,
						latitude = markerCoordinate[0],
						longitude = markerCoordinate[1];
						
					maxLon = longitude > maxLon ? longitude : maxLon;
					maxLat = latitude > maxLat ? latitude : maxLat;
					minLon = longitude < minLon ? longitude : minLon;
					minLat = latitude < minLat ? latitude : minLat;
				}
				
				var center = [(minLat + maxLat) * 0.5,
							  (minLon + maxLon) * 0.5];
				
				var map = L.map('map').setView(center, 6);

				L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
					attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
				}).addTo(map);
				
				for (var i=0; i < markers.length; i++) {
					var markerData = markers[i];
					L.marker(markerData.coordinate)
					 .addTo(map)
					 .bindPopup(markerData.date +
					 ' <a href="https://kcrispin9.wixsite.com/gelberzwerg/single-post/' +
					 markerData.url + '" target="_blank"><strong>' +
					 markerData.title + '</strong></a><br />' + markerData.desc);
				}
			});
			
		</script>
		
		<!-- Snip -->
	</body>
</html>

	
